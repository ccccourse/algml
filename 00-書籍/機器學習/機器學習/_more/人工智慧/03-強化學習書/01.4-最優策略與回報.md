### 1.4 強化學習的目標：最優策略與最優回報

在強化學習中，智能體的主要目標是學會如何在環境中做出最合適的決策，以最大化其長期回報。為了達成這一目標，我們需要引入**最優策略（Optimal Policy）**和**最優回報（Optimal Return）**這兩個概念，它們幫助我們定義智能體在各種情況下應該如何行動以及如何衡量其表現。

#### 1.4.1 最優策略（Optimal Policy）

最優策略是強化學習的核心目標之一。它是能夠最大化智能體在所有狀態下的預期回報的策略。簡單來說，最優策略告訴智能體，在每一個可能的狀態下，應該選擇哪個行為，以便獲得最大的累積回報。

數學上，最優策略\(\pi^*\)可以定義為：
\[
\pi^*(s) = \arg \max_a Q^*(s, a)
\]
其中，\(Q^*(s, a)\)是狀態\(s\)下，選擇行為\(a\)所能得到的最大期望回報，稱為最優行為值函數。這個公式的意思是，在每一個狀態\(s\)下，最優策略會選擇能夠帶來最大預期回報的行為\(a\)。

最優策略的目標是使智能體在每一個狀態下都能做出最佳的選擇，從而最大化長期回報。對於一個確定性策略，最優策略會直接告訴智能體在每一個狀態下應該選擇哪個行為；而對於隨機策略，最優策略則會給出在每一個狀態下各個行為的選擇概率。

#### 1.4.2 最優回報（Optimal Return）

最優回報是指在最優策略下，智能體所能獲得的最大期望總回報。它是衡量智能體在一個特定環境中表現的標準，代表了智能體執行最優策略後，從某一初始狀態開始所能達到的最高回報。

最優回報通常由**最優值函數（Optimal Value Function）**來描述。最優值函數定義了在每一個狀態下，智能體根據最優策略所能獲得的最大預期回報，並且能夠幫助我們評估各個狀態的重要性。

最優值函數\(V^*(s)\)是狀態\(s\)下的最大期望回報，可以表示為：
\[
V^*(s) = \max_\pi \mathbb{E}\left[G_t | s_t = s, \pi\right]
\]
其中，\(\mathbb{E}[G_t | s_t = s, \pi]\)表示在狀態\(s\)下，遵循策略\(\pi\)所能獲得的期望回報。

**最優行為值函數（Optimal Action-Value Function）**則定義了在某個狀態下選擇某個行為後，根據最優策略所能獲得的最大期望回報：
\[
Q^*(s, a) = \mathbb{E}\left[G_t | s_t = s, a_t = a, \pi^*\right]
\]
其中，\(Q^*(s, a)\)表示在狀態\(s\)下選擇行為\(a\)後，遵循最優策略所能獲得的最大回報。

最優回報是強化學習中最終要達到的目標，它代表了智能體所能獲得的最佳表現。為了找到最優回報，我們需要學習最優策略，並且通過策略迭代或價值迭代等方法來不斷優化智能體的行為。

#### 1.4.3 強化學習目標的數學表示

強化學習的目標是學習一個最優策略\(\pi^*\)，使得從任意狀態\(s\)開始，智能體根據這個策略選擇的行為能夠最大化期望的總回報。這個目標可以通過最大化最優值函數或最優行為值函數來實現。

具體來說，我們希望找到一個策略\(\pi^*\)，使得對於每一個狀態\(s\)，有：
\[
V^*(s) = \max_\pi \mathbb{E}\left[G_t | s_t = s, \pi\right]
\]
或者對於每一個狀態和行為對\((s, a)\)，有：
\[
Q^*(s, a) = \max_\pi \mathbb{E}\left[G_t | s_t = s, a_t = a, \pi\right]
\]

這些公式定義了最優策略和最優回報，並且幫助我們了解如何在強化學習中最大化智能體的回報。

#### 1.4.4 策略的改進與最優策略的學習

在強化學習中，智能體通過與環境的互動來不斷改進其策略。學習過程中，智能體會探索並評估不同的策略，逐漸接近最優策略。這一過程通常包括以下步驟：
- **探索（Exploration）**：智能體嘗試各種不同的行為，以收集足夠的回報信息，這有助於它瞭解環境的動態。
- **利用（Exploitation）**：智能體根據已有的知識選擇最有可能帶來最大回報的行為。
- **策略更新（Policy Update）**：根據探索和利用過程中獲得的經驗，智能體不斷調整其策略，使其逐步接近最優策略。

這些過程通過不同的學習演算法（如Q學習、策略梯度法等）來實現，最終使得智能體能夠學習出最優策略並最大化回報。

### 小結

強化學習的最終目標是學習一個最優策略，使得智能體能夠在各種狀態下選擇最佳行為，從而最大化其長期回報。最優策略是智能體在每個狀態下的行為選擇規則，而最優回報則是智能體在最優策略下所能獲得的最大總回報。通過策略改進、探索與利用的平衡，智能體可以不斷優化其策略，最終達到最優表現。