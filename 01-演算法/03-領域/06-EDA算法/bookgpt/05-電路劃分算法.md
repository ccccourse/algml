### 第五章：電路劃分算法

#### 5.1 Kernighan-Lin 劃分  
- **算法概述**  
  - Kernighan-Lin（KL）算法是一種經典的圖劃分算法，目標是將圖分成兩個子區域，同時最小化交界處的邊數（即切割成本）。  

- **核心步驟**  
  1. **初始化**：將節點隨機分成兩個子區域。  
  2. **增益計算**：對每個節點計算其移動到另一區域後的切割成本變化（增益值）。  
  3. **交換節點**：選擇一對節點進行交換以最大化增益，並暫存交換過程中的最佳狀態。  
  4. **迭代**：重複上述步驟直到無法進一步優化切割成本。  

- **優勢與限制**  
  - **優勢**：簡單易實現，適合小型電路的快速劃分。  
  - **限制**：無法處理大型網表，對初始劃分方案敏感，僅能產生兩分區結果。  

#### 5.2 Fiduccia-Mattheyses (FM) 劃分算法  
- **算法概述**  
  - FM 算法是對 KL 算法的改進，主要優化了計算效率並支持多分區設計。  

- **核心改進**  
  1. **單節點移動**：FM 不再交換節點對，而是逐步移動單個節點以實現增益最大化。  
  2. **增量更新**：利用增益值的局部更新避免重複計算。  
  3. **桶排序**：將節點按增益值分組，快速選擇最大增益節點進行移動。  

- **算法步驟**  
  1. **初始化**：劃分節點並計算初始增益值。  
  2. **增益更新**：每次移動節點後，僅更新受影響鄰居的增益值。  
  3. **鎖定節點**：每次移動後將節點鎖定，避免重複移動。  
  4. **終止條件**：所有節點均被鎖定或增益無法進一步優化時停止迭代。  

- **應用場景**  
  - 用於大型電路的快速劃分，特別是在標準單元分配和佈局設計中具有重要應用。  

#### 5.3 多層次劃分技術  
- **概述**  
  - 多層次劃分技術適用於超大規模電路設計，通過逐步簡化和還原電路結構來提高劃分效率和效果。  

- **核心流程**  
  1. **層次簡化（Coarsening）**  
     - 將網表或圖進行簡化，合併節點與邊形成較小規模的層次結構。  
     - 合併策略：基於邊權重或連接性進行聚合，例如重點合併密切連接的節點。  

  2. **初始劃分（Initial Partitioning）**  
     - 對簡化後的圖應用傳統劃分算法（如 FM 或 KL）生成初始劃分方案。  

  3. **層次展開與優化（Uncoarsening and Refinement）**  
     - 將簡化結構逐層展開，將劃分結果映射回原始結構。  
     - 在每一層應用局部優化算法（如增益更新）進一步改進劃分質量。  

- **優勢與挑戰**  
  - **優勢**：  
    - 能處理超大規模網表，計算效率遠高於單層算法。  
    - 層次簡化能有效減少初始劃分的複雜性。  
  - **挑戰**：  
    - 簡化與展開過程中的信息損失可能影響結果精度。  
    - 需要設計高效的合併策略和平衡性控制方法。  

- **應用場景**  
  - 超大規模集成電路設計中的邏輯模組劃分。  
  - 跨層設計中模組間的分配與優化。  

---

本章重點介紹電路劃分的核心算法，從經典的 KL 與 FM 到適合現代超大規模設計的多層次劃分技術，為後續的物理設計與資源分配提供高效基礎。
