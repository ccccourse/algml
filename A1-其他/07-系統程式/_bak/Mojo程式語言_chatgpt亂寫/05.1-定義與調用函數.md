### **定義與調用函數**

在 Mojo 中，函數是用來封裝重複操作的代碼塊，允許開發者提高代碼的可重用性和可讀性。你可以定義自己的函數並在需要的地方調用它們。Mojo 的函數定義與調用語法簡單直觀，支持傳遞參數、返回值、以及其他高級功能。

---

#### **1. 定義函數**

要定義一個函數，使用 `func` 關鍵字，然後指定函數的名稱、參數列表和函數體。

- **基本語法**：

  ```mojo
  func 函數名稱(參數1: 類型1, 參數2: 類型2, ...):
      函數體
      return 返回值
  ```

- **範例**：定義一個計算兩個數字和的函數

  ```mojo
  func add(a: Int, b: Int) -> Int:
      return a + b
  ```

  在這個範例中，`add` 函數接受兩個整數類型的參數 `a` 和 `b`，並返回它們的和。

- **範例**：定義一個無返回值的函數，打印字符串

  ```mojo
  func greet(name: String):
      print(f"Hello, {name}!")
  ```

  這個 `greet` 函數接受一個字符串類型的參數 `name`，並打印一個問候語。

---

#### **2. 調用函數**

調用函數時，只需要使用函數名稱並傳遞必要的參數。

- **基本語法**：

  ```mojo
  函數名稱(參數1, 參數2, ...)
  ```

- **範例**：調用 `add` 函數來計算兩個數字的和

  ```mojo
  let result = add(3, 5)
  print(result)
  ```

  **輸出**：
  ```
  8
  ```

  在這個範例中，`add(3, 5)` 調用了 `add` 函數並返回了兩個數字的和，將結果賦值給 `result`，然後打印出來。

- **範例**：調用 `greet` 函數來打招呼

  ```mojo
  greet("Alice")
  ```

  **輸出**：
  ```
  Hello, Alice!
  ```

  這段代碼調用了 `greet` 函數，並傳遞了字符串 `"Alice"` 作為參數，打印出對應的問候語。

---

#### **3. 參數與返回值**

函數可以有多個參數，並可以指定返回值的類型。Mojo 也支持默認參數值和可變參數。

- **範例**：帶有默認參數的函數

  ```mojo
  func greet(name: String, message: String = "Hello") -> String:
      return f"{message}, {name}!"
  ```

  這個函數有兩個參數，`name` 是必需的，`message` 有一個默認值 `"Hello"`。如果在調用時不提供 `message`，則默認會使用 `"Hello"`。

- **範例**：調用帶有默認參數值的函數

  ```mojo
  let greeting = greet("Alice")
  print(greeting)  # "Hello, Alice!"
  ```

  如果調用 `greet` 函數時只提供 `name`，則默認 `message` 參數的值為 `"Hello"`。

- **範例**：可變參數

  ```mojo
  func sum(numbers: Int...) -> Int:
      var total = 0
      for num in numbers:
          total += num
      return total
  ```

  這個函數 `sum` 接受可變數量的整數參數，並返回它們的總和。

- **範例**：調用可變參數函數

  ```mojo
  let total = sum(1, 2, 3, 4, 5)
  print(total)  # 15
  ```

  在這個範例中，`sum(1, 2, 3, 4, 5)` 接收了一組可變長度的整數參數並計算它們的總和。

---

#### **4. 匿名函數（Lambda 函數）**

Mojo 支持匿名函數，即沒有名稱的函數，這些函數通常用於短小的操作，並且可以傳遞給其他函數。

- **範例**：定義並調用匿名函數

  ```mojo
  let square = func(x: Int) -> Int: return x * x
  print(square(4))  # 16
  ```

  在這個範例中，定義了一個匿名函數 `square`，它接受一個整數參數 `x`，並返回它的平方。

---

#### **5. 內建函數與高階函數**

Mojo 中有許多內建函數，可以用來簡化開發過程。高階函數是接受函數作為參數或返回函數的函數。

- **範例**：使用內建函數 `map` 遍歷並操作集合

  ```mojo
  let numbers = [1, 2, 3, 4]
  let squares = numbers.map(func(x: Int) -> Int: return x * x)
  print(squares)  # [1, 4, 9, 16]
  ```

  在這個範例中，`map` 函數接受一個匿名函數作為參數，並對列表中的每個元素進行操作，返回每個元素的平方。

---

#### **6. 函數作用域與閉包（Closure）**

函數內部的變數通常只有在該函數內部可見（局部作用域）。但是，函數也可以引用它外部的變數，這樣的函數稱為閉包。

- **範例**：閉包示例

  ```mojo
  func outer():
      let factor = 2
      return func(x: Int) -> Int:
          return x * factor

  let multiplier = outer()
  print(multiplier(5))  # 10
  ```

  在這個範例中，`outer` 函數返回了一個匿名函數，該匿名函數引用了 `outer` 函數的變數 `factor`，這樣就形成了閉包。

---

#### **7. 總結**

- **函數定義**：使用 `func` 關鍵字來定義函數，並指定參數和返回值類型。
- **函數調用**：使用函數名稱並傳遞相應的參數來調用函數。
- **默認參數**：可以為函數參數設置默認值，當不提供參數時，會使用默認值。
- **可變參數**：函數可以接受任意數量的參數，這些參數可以通過 `...` 表示。
- **匿名函數**：也稱為 lambda 函數，通常用於簡單的操作，並且可以作為參數傳遞。
- **閉包**：函數可以引用外部作用域的變數，從而創建閉包，這對於一些高階操作非常有用。

函數是編程中不可或缺的工具，理解如何在 Mojo 中定義和使用函數，能夠幫助你編寫更加清晰、簡潔且可重用的代碼。